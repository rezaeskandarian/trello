stages:  - build  - devvariables:  NODE_ENV: "production"  COREPACK_ENABLE_STRICT: "0".default_node_job:  image: node:20-bullseye  cache:    key:      files:        - pnpm-lock.yaml    paths:      - .pnpm-store/  before_script:    - corepack enable    - corepack prepare pnpm@latest-9 --activate    - pnpm config set store-dir .pnpm-store    - pnpm install --frozen-lockfilebuild:  stage: build  extends: .default_node_job  script:    - pnpm run staged:lint    - pnpm run build  artifacts:    name: "next-build-$CI_COMMIT_SHORT_SHA"    when: on_success    expire_in: 7 days    paths:      - .next/      - public/      - package.json      - pnpm-lock.yaml      - next.config.ts  rules:    - if: $CI_COMMIT_BRANCHdev:  stage: dev  extends: .default_node_job  variables:    NODE_ENV: "development"  needs:    - job: build      artifacts: true  script:    - echo "Dev stage placeholder. Add deployment steps here (SSH/K8s/Vercel)."  environment:    name: dev  rules:    - if: $CI_PIPELINE_SOURCE == "merge_request_event"      when: manual      allow_failure: true    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH      when: manual      allow_failure: true